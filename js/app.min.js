(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e3),document.querySelector(".check").textContent=sessionStorage.getItem("money"),document.querySelector(".game")&&(d("bomb"),d("anvil"),d("circle")),document.querySelector(".mini-game")&&(document.querySelector(".footer__coins").textContent=50,sessionStorage.setItem("current-bet",50));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=(document.documentElement.clientWidth,document.documentElement.clientHeight);function c(e,t){document.querySelector(e).classList.contains(t)?document.querySelector(e).classList.remove(t):document.querySelector(e).classList.add(t)}function m(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelector(t).classList.add("_delete-money"),document.querySelector(t).textContent=sessionStorage.getItem("money")}),500),setTimeout((()=>{document.querySelector(t).classList.remove("_delete-money")}),1500)}function r(e){document.querySelector(e).classList.add("_no-money"),setTimeout((()=>{document.querySelector(e).classList.remove("_no-money")}),1e3)}function l(){return+sessionStorage.getItem("current-bet")}function n(e,t,o,s){setTimeout((()=>{document.querySelector(t).textContent=+sessionStorage.getItem("money")+e,document.querySelector(t).classList.add("_anim-add-money"),sessionStorage.setItem("money",+sessionStorage.getItem("money")+e)}),o),setTimeout((()=>{document.querySelector(t).classList.remove("_anim-add-money")}),s)}function a(){var e,t;!function(e){let t=l();e>=0&&e<=19?(i(3,3,3),n(.01*t,".check",2500,3500),u(.01*t,.01),g(1)):e>=20&&e<=23?(i(3,3,4),n(2*t,".check",2500,3500),u(2*t,2),g(2)):e>=24&&e<=26?(i(3,3,1),n(5*t,".check",2500,3500),u(5*t,5),g(3)):e>=27&&e<=29?(i(3,3,5),n(10*t,".check",2500,3500),u(10*t,10),g(4)):e>=30&&e<=31?(i(3,3,2),n(15*t,".check",2500,3500),u(15*t,15),g(5)):e>=32&&e<=33?(i(3,2,1),n(32*t,".check",2500,3500),u(32*t,32),g(6)):34==e?(i(4,2,1),n(42*t,".check",2500,3500),u(42*t,42),g(7)):35==e?(i(1,5,4),n(53*t,".check",2500,3500),u(53*t,53),g(8)):36==e&&(i(2,5,4),n(60*t,".check",2500,3500),u(60*t,60),g(9))}((e=0,t=36,Math.floor(Math.random()*(t-e)+e))),setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),2e3)}function i(e,t,o){let s=document.createElement("img"),c=document.createElement("img"),m=document.createElement("img");s.setAttribute("src",`img/mini-game/crystall-${e}.png`),c.setAttribute("src",`img/mini-game/crystall-${t}.png`),m.setAttribute("src",`img/mini-game/crystall-${o}.png`),document.querySelector(".crystalls__item_1").append(s),document.querySelector(".crystalls__item_1").classList.add(`_bg-${e}`),setTimeout((()=>{document.querySelector(".crystalls__item_2").append(c),document.querySelector(".crystalls__item_2").classList.add(`_bg-${t}`)}),500),setTimeout((()=>{document.querySelector(".crystalls__item_3").append(m),document.querySelector(".crystalls__item_3").classList.add(`_bg-${o}`)}),1e3)}function u(e,t){document.querySelector(".win__text").textContent=e,document.querySelector(".win__rate").textContent=`x${t}`}function g(e){setTimeout((()=>{document.querySelectorAll(".block-mini-game__box").forEach((t=>{t.dataset.level==e&&t.classList.add("_selected")}))}),1200)}function _(){document.querySelector(".crystalls__item_1 img")&&(document.querySelector(".crystalls__item_1 img").remove(),document.querySelector(".crystalls__item_2 img").remove(),document.querySelector(".crystalls__item_3 img").remove(),document.querySelector(".crystalls__item_1").classList.contains("_bg-1")?document.querySelector(".crystalls__item_1").classList.remove("_bg-1"):document.querySelector(".crystalls__item_1").classList.contains("_bg-2")&&document.querySelector(".crystalls__item_1").classList.remove("_bg-2"),document.querySelector(".crystalls__item_1").classList.contains("_bg-3")&&document.querySelector(".crystalls__item_1").classList.remove("_bg-3"),document.querySelector(".crystalls__item_1").classList.contains("_bg-4")&&document.querySelector(".crystalls__item_1").classList.remove("_bg-4"),document.querySelector(".crystalls__item_1").classList.contains("_bg-5")&&document.querySelector(".crystalls__item_1").classList.remove("_bg-5"),document.querySelector(".crystalls__item_2").classList.contains("_bg-1")?document.querySelector(".crystalls__item_2").classList.remove("_bg-1"):document.querySelector(".crystalls__item_2").classList.contains("_bg-2")&&document.querySelector(".crystalls__item_2").classList.remove("_bg-2"),document.querySelector(".crystalls__item_2").classList.contains("_bg-3")&&document.querySelector(".crystalls__item_2").classList.remove("_bg-3"),document.querySelector(".crystalls__item_2").classList.contains("_bg-4")&&document.querySelector(".crystalls__item_2").classList.remove("_bg-4"),document.querySelector(".crystalls__item_2").classList.contains("_bg-5")&&document.querySelector(".crystalls__item_2").classList.remove("_bg-5"),document.querySelector(".crystalls__item_3").classList.contains("_bg-1")?document.querySelector(".crystalls__item_3").classList.remove("_bg-1"):document.querySelector(".crystalls__item_3").classList.contains("_bg-2")&&document.querySelector(".crystalls__item_3").classList.remove("_bg-2"),document.querySelector(".crystalls__item_3").classList.contains("_bg-3")&&document.querySelector(".crystalls__item_3").classList.remove("_bg-3"),document.querySelector(".crystalls__item_3").classList.contains("_bg-4")&&document.querySelector(".crystalls__item_3").classList.remove("_bg-4"),document.querySelector(".crystalls__item_3").classList.contains("_bg-5")&&document.querySelector(".crystalls__item_3").classList.remove("_bg-5"))}function d(e){0==+sessionStorage.getItem(`bonus-${e}`)?document.querySelector(`.bonuses__count_${e}`).textContent="+":document.querySelector(`.bonuses__count_${e}`).textContent=sessionStorage.getItem(`bonus-${e}`)}let S={countRows:6,countCols:5,offsetBorder:10,gemSize:63,imagesCoin:["img/game/game-img-1.png","img/game/game-img-2.png","img/game/game-img-3.png","img/game/game-img-4.png"],gemClass:"gem",gemClassHeart:"gem-heart",gemClassSnow:"gem-snow",gemIdPrefix:"gem",gameStates:["pick","switch","revert","remove","refill"],gameState:"",movingItems:0,countScore:0,count_move:0,crystall_cord_x:null,crystall_cord_y:null},y={selectedRow:-1,selectedCol:-1,posX:"",posY:""},v=0;s<=710&&(S.gemSize=50);let b={container:document.createElement("div"),content:document.createElement("div"),wrapper:document.createElement("div"),cursor:document.createElement("div"),score:document.createElement("div"),gems:new Array};function f(e,t){S.gameState=S.gameStates[1],y.posX=e,y.posY=t,k()}function I(){b.wrapper.classList.add("block-game__wrapper"),b.content.append(b.wrapper)}function q(e){e>=4?e*=2:e>=5?e=2*(e+1):e>=6&&(e*=2*(e+2)),S.countScore+=e,n(e,".check",500,1500),1==+sessionStorage.getItem("active-game-level")&&S.countScore>=2e3?(sessionStorage.setItem("game-level-2",!0),document.querySelector(".levels__level_two").classList.remove("_not-active"),setTimeout((()=>{document.querySelector(".win").classList.add("_active"),p(1)}),1e3)):2==+sessionStorage.getItem("active-game-level")&&S.countScore>=3e3&&+sessionStorage.getItem("hearts")>=1?(sessionStorage.setItem("game-level-3",!0),document.querySelector(".levels__level_three").classList.remove("_not-active"),setTimeout((()=>{document.querySelector(".win").classList.add("_active"),p(2)}),1e3)):3==+sessionStorage.getItem("active-game-level")&&S.countScore>=5e3&&+sessionStorage.getItem("hearts")>=1&&setTimeout((()=>{document.querySelector(".win").classList.add("_active"),p(3)}),1e3)}function p(e){document.querySelector(".win__level").textContent=e,document.querySelector(".win__text_game").textContent=S.countScore}function h(e,t,o,s,c){let m=document.createElement("div");m.classList.add(S.gemClass),m.id=`${S.gemIdPrefix}_${o}_${s}`,m.style.top=`${e}px`,m.style.left=`${t}px`,m.style.backgroundImage=`url('${c}')`,b.wrapper.append(m)}function L(e,t,o,s){let c=document.createElement("div");c.classList.add(S.gemClassHeart),c.id=`${S.gemIdPrefix}_${o}_${s}`,c.style.top=`${e}px`,c.style.left=`${t}px`,b.wrapper.append(c)}function w(e,t,o,s){let c=document.createElement("div");c.classList.add(S.gemClassSnow),c.id=`${S.gemIdPrefix}_${o}_${s}`,c.style.top=`${e}px`,c.style.left=`${t}px`,b.wrapper.append(c)}function C(){for(let e=0;e<S.countRows;e++){b.gems[e]=new Array;for(let t=0;t<S.countCols;t++)b.gems[e][t]=-1}for(let e=0;e<S.countRows;e++)for(let t=0;t<S.countCols;t++){do{1==+sessionStorage.getItem("active-game-level")?b.gems[e][t]=2==e&&0==t||2==e&&4==t?5:Math.floor(3*Math.random()+0):2==+sessionStorage.getItem("active-game-level")?b.gems[e][t]=0==e&&2==t?4:2==e&&4==t?5:Math.floor(3*Math.random()+0):3==+sessionStorage.getItem("active-game-level")&&(b.gems[e][t]=0==e&&2==t?4:2==e&&2==t||2==e&&4==t||3==e&&0==t?5:Math.floor(3*Math.random()+0))}while(x(e,t));1==+sessionStorage.getItem("active-game-level")?2==e&&0==t?w(2*S.gemSize,0*S.gemSize,2,0):2==e&&4==t?w(2*S.gemSize,4*S.gemSize,2,4):h(e*S.gemSize,t*S.gemSize,e,t,S.imagesCoin[b.gems[e][t]]):2==+sessionStorage.getItem("active-game-level")?0==e&&2==t?L(0*S.gemSize,2*S.gemSize,0,2):2==e&&4==t?w(2*S.gemSize,4*S.gemSize,2,4):h(e*S.gemSize,t*S.gemSize,e,t,S.imagesCoin[b.gems[e][t]]):3==+sessionStorage.getItem("active-game-level")&&(0==e&&2==t?L(0*S.gemSize,2*S.gemSize,0,2):2==e&&2==t?w(2*S.gemSize,2*S.gemSize,2,2):2==e&&4==t?w(2*S.gemSize,4*S.gemSize,2,4):3==e&&0==t?w(3*S.gemSize,0*S.gemSize,3,0):h(e*S.gemSize,t*S.gemSize,e,t,S.imagesCoin[b.gems[e][t]]))}}function x(e,t){return E(e,t)||A(e,t)}function E(e,t){if(-1!=e&&-1!=t){let o=b.gems[e][t],s=0,c=e;for(;c>0&&b.gems[c-1][t]==o;)s++,c--;for(c=e;c<S.countRows-1&&b.gems[c+1][t]==o;)s++,c++;return s>1}return!1}function A(e,t){if(-1!=e&&-1!=t){let o=b.gems[e][t],s=0,c=t;for(;c>0&&b.gems[e][c-1]==o;)s++,c--;for(c=t;c<S.countCols-1&&b.gems[e][c+1]==o;)s++,c++;return s>1}return!1}function k(){if(!(y.selectedRow>=0&&y.selectedCol>=0&&y.posY>=0&&y.posX>=0&&5!=b.gems[y.posY][y.posX]))return!1;{let e=y.selectedRow-y.posY,t=y.selectedCol-y.posX;document.querySelector("#"+S.gemIdPrefix+"_"+y.selectedRow+"_"+y.selectedCol).classList.add("switch"),document.querySelector("#"+S.gemIdPrefix+"_"+y.selectedRow+"_"+y.selectedCol).setAttribute("dir","-1"),document.querySelector("#"+S.gemIdPrefix+"_"+y.posY+"_"+y.posX).classList.add("switch"),document.querySelector("#"+S.gemIdPrefix+"_"+y.posY+"_"+y.posX).setAttribute("dir","1"),$(".switch").each((function(){S.movingItems++,$(this).animate({left:"+="+t*S.gemSize*$(this).attr("dir"),top:"+="+e*S.gemSize*$(this).attr("dir")},{duration:250,complete:function(){z()}}),$(this).removeClass("switch")})),document.querySelector("#"+S.gemIdPrefix+"_"+y.selectedRow+"_"+y.selectedCol).setAttribute("id","temp"),document.querySelector("#"+S.gemIdPrefix+"_"+y.posY+"_"+y.posX).setAttribute("id",S.gemIdPrefix+"_"+y.selectedRow+"_"+y.selectedCol),document.querySelector("#temp").setAttribute("id",S.gemIdPrefix+"_"+y.posY+"_"+y.posX);let o=b.gems[y.selectedRow][y.selectedCol];b.gems[y.selectedRow][y.selectedCol]=b.gems[y.posY][y.posX],b.gems[y.posY][y.posX]=o}}function z(){if(S.movingItems--,0==S.movingItems){switch(S.gameState){case S.gameStates[1]:case S.gameStates[2]:x(y.selectedRow,y.selectedCol)||x(y.posY,y.posX)?(S.gameState=S.gameStates[3],x(y.selectedRow,y.selectedCol)&&B(y.selectedRow,y.selectedCol),x(y.posY,y.posX)&&B(y.posY,y.posX),R()):y.selectedRow>=0&&y.selectedCol>=0&&y.posY>=0&&y.posX>=0&&4!=b.gems[y.posY][y.posX]&&(S.gameState!=S.gameStates[2]?(S.gameState=S.gameStates[2],k()):(S.gameState=S.gameStates[0],y.selectedRow=-1,y.selectedCol=-1));break;case S.gameStates[3]:P();break;case S.gameStates[4]:!function(){let e=0;for(let t=0;t<S.countCols;t++)-1==b.gems[0][t]&&(b.gems[0][t]=Math.floor(3*Math.random()+0),h(0,t*S.gemSize,0,t,S.imagesCoin[b.gems[0][t]]),e++);if(e)S.gameState=S.gameStates[3],P();else{let e=0;for(let t=0;t<S.countRows;t++)for(let o=0;o<S.countCols;o++)o<=S.countCols-3&&b.gems[t][o]==b.gems[t][o+1]&&b.gems[t][o]==b.gems[t][o+2]&&(e++,B(t,o)),t<=S.countRows-3&&b.gems[t][o]==b.gems[t+1][o]&&b.gems[t][o]==b.gems[t+2][o]&&(e++,B(t,o));e>0?(S.gameState=S.gameStates[3],R()):(S.gameState=S.gameStates[0],y.selectedRow=-1)}}()}0==v&&-1!=b.gems[5].indexOf(4)&&(v++,S.movingItems++,document.querySelector(".gem-heart").classList.add("_anim"),setTimeout((()=>{document.querySelector(".gem-heart").remove();let e=b.gems[5].indexOf(4);b.gems[5][e]=Math.floor(3*Math.random()+0),S.gameState=S.gameStates[3],h(5*S.gemSize,e*S.gemSize,5,e,S.imagesCoin[b.gems[5][e]]),z()}),500),sessionStorage.getItem("hearts")?sessionStorage.setItem("hearts",+sessionStorage.getItem("hearts")+1):sessionStorage.setItem("hearts",1),setTimeout((()=>{document.querySelector(".header-game__count-heart").textContent=sessionStorage.getItem("hearts")}),1e3))}}function B(e,t){let o=b.gems[e][t],s=e;document.querySelector("#"+S.gemIdPrefix+"_"+e+"_"+t).classList.add("remove");let c=document.querySelectorAll(".remove").length;if(E(e,t)){for(;s>0&&b.gems[s-1][t]==o;)document.querySelector("#"+S.gemIdPrefix+"_"+(s-1)+"_"+t).classList.add("remove"),b.gems[s-1][t]=-1,s--,c++;for(s=e;s<S.countRows-1&&b.gems[s+1][t]==o;)document.querySelector("#"+S.gemIdPrefix+"_"+(s+1)+"_"+t).classList.add("remove"),b.gems[s+1][t]=-1,s++,c++}if(A(e,t)){for(s=t;s>0&&b.gems[e][s-1]==o;)document.querySelector("#"+S.gemIdPrefix+"_"+e+"_"+(s-1)).classList.add("remove"),b.gems[e][s-1]=-1,s--,c++;for(s=t;s<S.countCols-1&&b.gems[e][s+1]==o;)document.querySelector("#"+S.gemIdPrefix+"_"+e+"_"+(s+1)).classList.add("remove"),b.gems[e][s+1]=-1,s++,c++}b.gems[e][t]=-1,q(c)}function R(){$(".remove").each((function(){S.movingItems++,$(this).animate({opacity:0},{duration:200,complete:function(){$(this).remove(),z()}})}))}function P(){let e=0;for(let t=0;t<S.countCols;t++)for(let o=S.countRows-1;o>0;o--)-1==b.gems[o][t]&&b.gems[o-1][t]>=0&&(document.querySelector("#"+S.gemIdPrefix+"_"+(o-1)+"_"+t).classList.add("fall"),document.querySelector("#"+S.gemIdPrefix+"_"+(o-1)+"_"+t).setAttribute("id",S.gemIdPrefix+"_"+o+"_"+t),b.gems[o][t]=b.gems[o-1][t],b.gems[o-1][t]=-1,e++);$(".fall").each((function(){S.movingItems++,$(this).animate({top:"+="+S.gemSize},{duration:100,complete:function(){$(this).removeClass("fall"),z()}})})),0==e&&(S.gameState=S.gameStates[4],S.movingItems=1,z())}document.addEventListener("touchstart",(function(e){let t=e.target;if(S.count_move=0,t.closest(".gem")||t.closest(".gem-heart")){let o=parseInt(t.getAttribute("id").split("_")[1]),s=parseInt(t.getAttribute("id").split("_")[2]);y.selectedRow=o,y.selectedCol=s,S.crystall_cord_x=e.touches[0].clientX,S.crystall_cord_y=e.touches[0].clientY}}),!1),document.addEventListener("touchend",(function(){setTimeout((()=>{y.selectedRow=-1,y.selectedCol=-1}),500)}),!1),document.addEventListener("touchmove",(function(e){if(S.count_move>=1)return!1;if(e.target.closest(".block-game__wrapper")){S.count_move++;let t=e.touches[0].clientX,o=e.touches[0].clientY,s=t-S.crystall_cord_x,c=o-S.crystall_cord_y,m=y.selectedRow,r=y.selectedCol;Math.abs(s)>Math.abs(c)?f(s>0?r+1:r-1,m):f(r,c>0?m+1:m-1)}}),!1),document.querySelector(".game")&&(sessionStorage.getItem("active-game-level")?2==+sessionStorage.getItem("active-game-level")?document.querySelector(".footer-game__lable").textContent="Level 2":3==+sessionStorage.getItem("active-game-level")&&(document.querySelector(".footer-game__lable").textContent="Level 3"):sessionStorage.setItem("active-game-level",1),sessionStorage.getItem("game-level-2")&&document.querySelector(".levels__level_two").classList.remove("_not-active"),sessionStorage.getItem("game-level-3")&&document.querySelector(".levels__level_three").classList.remove("_not-active"),document.body.classList.add("_hold"),b.content.style.padding=S.offsetBorder+"px",b.content.style.width=S.gemSize*S.countCols+2*S.offsetBorder+"px",b.content.style.height=S.gemSize*S.countRows+2*S.offsetBorder+"px",document.querySelector(".block-game__field").append(b.content),I(),C(),S.gameState=S.gameStates[0],sessionStorage.setItem("hearts",0),document.querySelector(".header-game__count-heart").textContent=sessionStorage.getItem("hearts"),S.countScore=0),document.addEventListener("click",(e=>{let s=e.target;if(s.closest(".acces-preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible")),s.closest(".footer__minus")){let e=+sessionStorage.getItem("current-bet");e>50&&(sessionStorage.setItem("current-bet",e-50),document.querySelector(".footer__coins").textContent=sessionStorage.getItem("current-bet"))}if(s.closest(".footer__plus")){let e=+sessionStorage.getItem("current-bet");+sessionStorage.getItem("money")>e&&(sessionStorage.setItem("current-bet",e+50),document.querySelector(".footer__coins").textContent=sessionStorage.getItem("current-bet"))}if(s.closest(".footer__button_bet")&&(+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?(c(".footer__button_bet","_hold"),c(".footer__controls","_hold"),m(l(),".check"),_(),setTimeout((()=>{a()}),1e3)):r(".check")),(s.closest(".header-game__button-home")||s.closest(".header__button-home"))&&(sessionStorage.removeItem("hearts"),sessionStorage.removeItem("current-bet"),sessionStorage.removeItem("active-game-level")),s.closest(".win__button_play")&&(document.querySelector(".win").classList.remove("_active"),_(),c(".footer__button_bet","_hold"),c(".footer__controls","_hold"),document.querySelectorAll(".block-mini-game__box").forEach((e=>{e.dataset.level&&e.classList.remove("_selected")}))),s.closest(".win__button_home")&&sessionStorage.removeItem("current-bet"),document.querySelector(".shop")&&document.querySelector(".shop").classList.contains("_active")&&!s.closest(".shop__body")&&document.querySelector(".shop").classList.remove("_active"),(s.closest(".bonuses__count_bomb")||s.closest(".bonuses__count_anvil")||s.closest(".bonuses__count_circle"))&&document.querySelector(".shop").classList.add("_active"),s.closest(".bonuses__button_bomb")&&(+sessionStorage.getItem("money")>=3500?(m(3500,".check"),sessionStorage.setItem("bonus-bomb",+sessionStorage.getItem("bonus-bomb")+1),d("bomb")):r(".check")),s.closest(".bonuses__button_anvil")&&(+sessionStorage.getItem("money")>=5500?(m(5500,".check"),sessionStorage.setItem("bonus-anvil",+sessionStorage.getItem("bonus-anvil")+1),d("anvil")):r(".check")),s.closest(".bonuses__button_circle")&&(+sessionStorage.getItem("money")>=7500?(m(7500,".check"),sessionStorage.setItem("bonus-circle",+sessionStorage.getItem("bonus-circle")+1),d("circle")):r(".check")),s.closest(".bonuses__bomb")&&!s.closest(".bonuses__count_bomb")&&0!=+sessionStorage.getItem("bonus-bomb")&&(sessionStorage.setItem("bonus-bomb",+sessionStorage.getItem("bonus-bomb")-1),d("bomb"),s.closest(".bonuses__bomb").classList.add("_anim")),s.closest(".bonuses__anvil")&&!s.closest(".bonuses__count_anvil")&&0!=+sessionStorage.getItem("bonus-anvil")&&(sessionStorage.setItem("bonus-anvil",+sessionStorage.getItem("bonus-anvil")-1),d("anvil"),s.closest(".bonuses__anvil").classList.add("_anim")),s.closest(".bonuses__circle")&&!s.closest(".bonuses__count_circle")&&0!=+sessionStorage.getItem("bonus-circle")&&(sessionStorage.setItem("bonus-circle",+sessionStorage.getItem("bonus-circle")-1),d("circle"),s.closest(".bonuses__circle").classList.add("_anim")),s.closest(".block-game__wrapper")&&document.querySelector(".bonuses__bomb").classList.contains("_anim")){!function(e){S.movingItems++,document.querySelector(".bonuses__bomb").classList.remove("_anim");let t,o,s,c,m,r,l,n,a,i,u,g,_,d,y,v,b=parseInt(e.getAttribute("id").split("_")[1]),f=parseInt(e.getAttribute("id").split("_")[2]);0!=b&&(t=b-1,o=f),b>=2&&(s=b-2,c=f),b<=4&&(m=b+1,r=f),b<=3&&(l=b+2,n=f),f<4&&(a=b,i=f+1),f<3&&(u=b,g=f+2),0!=f&&(_=b,d=f-1),f>=2&&(y=b,v=f-2),document.getElementById(`gem_${t}_${o}`)&&(B(t,o),document.getElementById(`gem_${t}_${o}`).remove()),document.getElementById(`gem_${s}_${c}`)&&(B(s,c),document.getElementById(`gem_${s}_${c}`).remove()),document.getElementById(`gem_${m}_${r}`)&&(B(m,r),document.getElementById(`gem_${m}_${r}`).remove()),document.getElementById(`gem_${l}_${n}`)&&(B(l,n),document.getElementById(`gem_${l}_${n}`).remove()),document.getElementById(`gem_${_}_${d}`)&&(B(_,d),document.getElementById(`gem_${_}_${d}`).remove()),document.getElementById(`gem_${y}_${v}`)&&(B(y,v),document.getElementById(`gem_${y}_${v}`).remove()),document.getElementById(`gem_${a}_${i}`)&&(B(a,i),document.getElementById(`gem_${a}_${i}`).remove()),document.getElementById(`gem_${u}_${g}`)&&(B(u,g),document.getElementById(`gem_${u}_${g}`).remove()),S.gameState=S.gameStates[3],z()}(s.closest(".gem"))}if(s.closest(".block-game__wrapper")&&document.querySelector(".bonuses__anvil").classList.contains("_anim")){!function(e){S.movingItems++,document.querySelector(".bonuses__anvil").classList.remove("_anim");let t=parseInt(e.getAttribute("id").split("_")[1]);B(t,0),document.getElementById(`gem_${t}_0`).remove(),B(t,1),document.getElementById(`gem_${t}_1`).remove(),B(t,2),document.getElementById(`gem_${t}_2`).remove(),B(t,3),document.getElementById(`gem_${t}_3`).remove(),B(t,4),document.getElementById(`gem_${t}_4`).remove(),S.gameState=S.gameStates[3],z()}(s.closest(".gem"))}if(s.closest(".block-game__wrapper")&&document.querySelector(".bonuses__circle").classList.contains("_anim")){!function(e){S.movingItems++,document.querySelector(".bonuses__circle").classList.remove("_anim");let t=parseInt(e.getAttribute("id").split("_")[1]),o=parseInt(e.getAttribute("id").split("_")[2]),s=b.gems[t][o];for(let e=0;e<b.gems.length;e++)for(let t=0;t<b.gems[e].length;t++)b.gems[e][t]==s&&(B(e,t),document.getElementById(`gem_${e}_${t}`).remove());S.gameState=S.gameStates[3],z()}(s.closest(".gem"))}document.querySelector(".levels")&&document.querySelector(".levels").classList.contains("_active")&&!s.closest(".levels__body")&&document.querySelector(".levels").classList.remove("_active"),s.closest(".footer-game__lable")&&(sessionStorage.getItem("game-level-2")?document.querySelector(".levels__level_two").classList.remove("_not-active"):sessionStorage.getItem("game-level-3")&&document.querySelector(".levels__level_three").classList.remove("_not-active"),document.querySelector(".levels").classList.add("_active")),s.closest(".levels__level_one")&&(sessionStorage.setItem("active-game-level",1),delete b.gems,document.querySelectorAll(".gem").forEach((e=>e.remove())),document.querySelector(".gem-heart")&&document.querySelector(".gem-heart").remove(),document.querySelectorAll(".gem-snow").forEach((e=>e.remove())),document.querySelector(".block-game__wrapper").remove(),b.gems=[],setTimeout((()=>{I(),C()}),500),document.querySelector(".levels").classList.remove("_active"),S.countScore=0,sessionStorage.setItem("hearts",0),document.querySelector(".footer-game__lable").textContent="Level 1"),s.closest(".levels__level_two")&&sessionStorage.getItem("game-level-2")&&(sessionStorage.setItem("active-game-level",2),delete b.gems,document.querySelectorAll(".gem").forEach((e=>e.remove())),document.querySelector(".gem-heart")&&document.querySelector(".gem-heart").remove(),document.querySelectorAll(".gem-snow").forEach((e=>e.remove())),document.querySelector(".block-game__wrapper").remove(),b.gems=[],setTimeout((()=>{I(),C()}),500),document.querySelector(".levels").classList.remove("_active"),S.countScore=0,sessionStorage.setItem("hearts",0),document.querySelector(".footer-game__lable").textContent="Level 2"),s.closest(".levels__level_three")&&sessionStorage.getItem("game-level-3")&&(sessionStorage.setItem("active-game-level",3),delete b.gems,document.querySelectorAll(".gem").forEach((e=>e.remove())),document.querySelector(".gem-heart")&&document.querySelector(".gem-heart").remove(),document.querySelectorAll(".gem-snow").forEach((e=>e.remove())),document.querySelector(".block-game__wrapper").remove(),b.gems=[],setTimeout((()=>{I(),C()}),500),document.querySelector(".levels").classList.remove("_active"),S.countScore=0,sessionStorage.setItem("hearts",0),document.querySelector(".footer-game__lable").textContent="Level 3"),s.closest(".win__button_levels")&&(document.querySelector(".win").classList.remove("_active"),setTimeout((()=>{document.querySelector(".levels").classList.add("_active"),S.countScore=0,sessionStorage.setItem("hearts",0)}),500)),s.closest(".win__button_game")&&(document.querySelector(".win").classList.remove("_active"),S.countScore=0,sessionStorage.setItem("hearts",0))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();